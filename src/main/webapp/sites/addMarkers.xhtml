<ui:composition template="/templates/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:gis="http://gisfaces.com/"
                xmlns:p="http://primefaces.org/ui">
    <ui:define name="content">
        <h:head>

            <h:outputStylesheet library="css" name="jsxgraph.css"/>

            <script type="text/javascript">

            </script>
            <script type="text/javascript"
                    src="http://maps.google.com/maps/api/js?sensor=false"></script>
            <script type="text/javascript"
                    src="//cdnjs.cloudflare.com/ajax/libs/jsxgraph/0.99.1/jsxgraphcore.js"></script>
        </h:head>
        <h:form prependId="false">
            <p:growl id="messages" showDetail="true"/>
            <p:gmap id="gmap" center="36.890257,30.707417" zoom="13" type="HYBRID" style="width:600px;height:400px"
                    model="#{addMarkersView.emptyModel}" onPointClick="handlePointClick(event);" widgetVar="map"/>
            <gis:map mapPanel="panel1" coordinatesPanel="panel2" geocoderPanel="panel3" latitude="39.828175"
                     longitude="-98.5795" zoom="4">
                <gis:layer number="a" visible="s" where="f"/>
                <gis:service type="tiled"
                             url="http://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"/>
                <gis:service type="dynamic"
                             url="http://maps.ngdc.noaa.gov/arcgis/rest/services/graticule/MapServer"/>
                <f:ajax event="click" render="growl1" listener="#{mapBean.doMapClickListener}"></f:ajax>
                <f:ajax event="extent" render="growl1" listener="#{mapBean.doMapExtentListener}"></f:ajax>
                <f:ajax event="select" render="growl1" listener="#{mapBean.doMapSelectListener}"></f:ajax>
            </gis:map>
            <p:dialog widgetVar="dlg" showEffect="fade" header="UtwÃ³rz nowy punkt">
                <h:panelGrid columns="2">
                    <h:outputLabel for="title" value="Nazwa:"/>
                    <p:inputText id="title" value="#{addMarkersView.title}"/>

                    <f:facet name="footer">
                        <p:commandButton value="Add" actionListener="#{addMarkersView.addMarker}"
                                         oncomplete="markerAddComplete()"/>
                        <p:commandButton value="Cancel" onclick="return cancel()"/>
                    </f:facet>
                </h:panelGrid>

                <h:inputHidden id="lat" value="#{addMarkersView.lat}"/>
                <h:inputHidden id="lng" value="#{addMarkersView.lng}"/>

            </p:dialog>

        </h:form>
    </ui:define>
</ui:composition>
